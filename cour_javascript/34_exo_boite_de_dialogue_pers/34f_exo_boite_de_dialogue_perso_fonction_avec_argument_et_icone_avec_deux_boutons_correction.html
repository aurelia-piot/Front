<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>34d Boite de dialogue personnalisée</title>
    <style>
        body{
            background: rgb(115, 175, 36);
        }
    
    .msgbox{
        /* background-color:rgb(172, 11, 11) ; */
        width: 242px;
        /* height: 100px; */
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        /*position X et position Y*/
    }



    .msgbox p {
        /* background-color:rgb(137, 241, 137);  */
        color: rgba(12, 5, 5, 0.692);
        /* padding: 10px 20px; */
        padding: 5px 55px;
        line-height: 1.5;
        background-repeat: no-repeat;
        background-position: 10px center;
        
    }
    .msgbox button , .msgChat button{
        background-color: rgb(255, 255, 255);
        position: absolute;
        top: .2rem;
        right: .2rem;
    }
    .icone{
        top:50%;
        left:17%;
        transform:translate(-50%, -50%); 
        position: absolute;

        
    }
    
    </style>
</head>
<body>
    
    <button id="btnAfficheDialogChat">affiche la boite de dialogue de chat</button>
    <button id="btnAfficheDialogWarning">affiche la boite de dialogue de warning</button>

<!-- on retire la div du message car on va la generer dynamiquement en Javascript -->
    <!-- 
    <div class="msgbox">
        <p>Message</p>
        <button>X</button>
    </div>
     -->
     <script>
         
         var btnOpenBoxChat = document.getElementById("btnAfficheDialogChat");
        var btnOpenBoxWarning = document.getElementById("btnAfficheDialogWarning");
        
     



    function afficheMessage(msgText, msgType){
        //dans une variable nommée body on selection la balise body dans le DOM

        var body = document.querySelector("body");
       
        
        //dans une variable boiteDialogue on crée un objet div/p/button avec la methode createElement()
        
        var boiteDialogue = document.createElement("div");
        var pMessage = document.createElement("p");
        //et ajouter a cet objet pMessage le contenut txt suivant :'je suis une boite de Dialogue ' avec la methode textContent.

        var closeBtn = document.createElement("button");

        pMessage.textContent = msgText;
        closeBtn.textContent = "X";
 
        boiteDialogue.style.backgroundColor ="rgb(172, 11, 11)";


        //on va ajouter cette boiteDialogue l'attribut class="msgbox" avec la méthode setAttribute('nom de l'attribut','nouvelle valeur').
        //pour les 2 parametre attendus par setAttribute
        //1-nom de l'attribut = class
        //2- nouvelle valeur : le nom de la class = msgbox

        boiteDialogue.setAttribute('class', 'msgbox');

        body.appendChild(boiteDialogue);

        boiteDialogue.appendChild(pMessage);
        boiteDialogue.appendChild(closeBtn);
        
        //on donne la div class="boiteDialogue" comme enfant a notre body

        if(msgType === 'chat'){
            //alert("chat");
            //et on affiche l'image de fond chat.png comme backgroundImage de pMessage
            boiteDialogue.style.backgroundColor= " rgb(180, 180, 4)";
            pMessage.style.backgroundImage = "url(images/chat.png) ";
            pMessage.style.backgroundRepeat="noRepeat";
          
        }//fin du if
       


        else if(msgType ==='warning'){
            //alert("warning");
         boiteDialogue.style.backgroundColor = "darkred";
         pMessage.style.color ='white';
         pMessage.style.backgroundImage = "url(images/warning.png) ";
            
            
            // pMessage.style.marginLeft = "10%";
        }

        else{
            alert('Bug');
        }

        

        closeBtn.addEventListener( "click",function(){
            boiteDialogue.parentNode.removeChild(boiteDialogue);
        })

        

     }//fin de la fonction afficheMessage


     /* Si le msgType a la valeur 'chat' alors l'icone chat sera afficher comme backgroundimage du message et la couleur d'arriere plan de la boite de dialogue sera bleu*/
     /*sinon si le msgtype a la valeur 'warning' alors l'icone warning sera afficher comme backgroundimage du message et la couleur d'arriere plan de la boite de dialogue sera rouge*/




       
     //ajouter a btnOpenBox un ecouteur d'evenement qui au click, declanche ma fonction afficheMessage
        
        //  btnOpenBox.addEventListener("click", afficheMessage('Le nouveau text de la boite'));
     
     //les parenthese qui suivent afficheMessage declenche imediatement la fonction sans attendre le click
     //pour eviter cela, on va faire une seconde verson si dessous
     btnOpenBoxChat.addEventListener("click",function() {
        afficheMessage('Chalut', 'chat');
     });
    
    btnOpenBoxWarning.addEventListener("click", function () {
        afficheMessage('attention ', 'warning');
    });








     
        //si nous voulon specifier des parametres pour la fonction que nous appelons (function afficheMessage)
        //nous ne pouvons pas l'invoquer directement car sinon elle se declencherais d'elle meme
        //nous avons donc besoin de la metre a l'interieur d'une fonction anonyme (elle n'est pas dans la portée immediate et n'est donc pas appelée immediatement )
        //donc elle ne sera pas appeler tant que le bouton ne sera pas appeler  
     
    //  SI 
        //le msgType a la valeur 'warning', alors l'icone warning sera affichée commme BG-image dumsg, et le panel prendra la couleur d'arriere plan rouge.
    //Sinon SI
        //le msgType à la valeur 'chat', alors l'icone chat sera afficher et le panel prendra la couleur d'arriere plan bleu turquoi
    //Sinon 
        //le parametre msgtype n'a pas de valeur du tout, alors le paragraphe prendra un padding par defaut et il n'y aura ni icone, ni couleur d'arriere plan
    
    //etape 1
        //construiser les IF avec les instructions suivantes.
        //Alors
        //on affiche alert('attention');
        //Sinon Si (le msgType a la valeur 'chat')
        //Alors
        //on affiche alert('chat');

    //etape2 
     
     </script>
</body>
</html>